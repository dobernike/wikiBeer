{"version":3,"sources":["ts/main.ts"],"names":[],"mappings":"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","file":"main.0936e181.js","sourceRoot":"..\\src","sourcesContent":["// modal sing-in\r\nconst singIn = document.querySelector(\".main-header__sing-in\");\r\nconst popup = document.querySelector(\".modal-login\");\r\nconst close = popup.querySelector(\".modal-login__button--close\");\r\nconst form = popup.querySelector(\".modal-login__form\");\r\nconst login = popup.querySelector(\"[name=login]\");\r\nconst email = popup.querySelector(\"[name=email]\");\r\nconst password = popup.querySelector(\"[name=password]\");\r\nconst overlay = document.querySelector(\".modal-overlay\");\r\n\r\nsingIn.addEventListener(\"click\", evt => {\r\n  evt.preventDefault();\r\n  popup.classList.add(\"modal-show\");\r\n  overlay.classList.add(\"modal-show\");\r\n});\r\n\r\nclose.addEventListener(\"click\", evt => {\r\n  evt.preventDefault();\r\n  popup.classList.remove(\"modal-show\");\r\n  overlay.classList.remove(\"modal-show\");\r\n});\r\n\r\noverlay.addEventListener(\"click\", evt => {\r\n  evt.preventDefault();\r\n  popup.classList.remove(\"modal-show\");\r\n  overlay.classList.remove(\"modal-show\");\r\n});\r\n\r\nwindow.addEventListener(\"keydown\", evt => {\r\n  if (evt.key === `Escape`) {\r\n    evt.preventDefault();\r\n    popup.classList.remove(\"modal-show\");\r\n    overlay.classList.remove(\"modal-show\");\r\n  }\r\n});\r\n\r\nform.addEventListener(\"submit\", evt => {\r\n  evt.preventDefault();\r\n  popup.classList.remove(\"modal-show\");\r\n  overlay.classList.remove(\"modal-show\");\r\n  console.warn(\"Вы вошли!\");\r\n});\r\n\r\n// Loading data from API\r\nconst _apiBase = \"https://api.punkapi.com/v2/\";\r\n\r\nconst PAGE = {\r\n  FIRST: 1,\r\n  current: 1,\r\n  LAST: 5\r\n};\r\n\r\nconst cards = document.querySelectorAll(\".beer-card\");\r\nconst pagination = document.querySelector(\".pagination__list\");\r\nconst paginationItems = pagination.children;\r\n\r\nconst getBeers = async (currentPage: number) => {\r\n  const paginationItem = pagination.querySelector(\".active\");\r\n  paginationItem.classList.remove(\"active\");\r\n\r\n  paginationItems[currentPage].classList.add(\"active\");\r\n\r\n  const url = `/beers?page=${currentPage}&per_page=6`;\r\n  const res = await fetch(_apiBase + url);\r\n  if (!res.ok) {\r\n    throw new Error(`Could not fetch ${url}` + `, received ${res.status}`);\r\n  }\r\n\r\n  const json = await res.json();\r\n  const beers = json.map(_transformBeers);\r\n  // Rerender DOM\r\n  main.innerHTML = \"\";\r\n  const beersNames = [];\r\n  beers.forEach(beer => {\r\n    beersNames.push(beer.name);\r\n    createCard(beer);\r\n  });\r\n  createSearch(beersNames);\r\n};\r\n\r\ngetBeers(PAGE.current);\r\n\r\nconst _transformBeers = (beer: any) => {\r\n  return {\r\n    img: beer.image_url,\r\n    name: beer.name,\r\n    tagline: beer.tagline,\r\n    abv: beer.abv,\r\n    brewed: beer.first_brewed,\r\n    description: beer.description\r\n  };\r\n};\r\n\r\n// Pagination\r\npagination.addEventListener(\"click\", (evt: MouseEvent) => {\r\n  evt.preventDefault();\r\n  const target = evt.target as HTMLElement;\r\n  if (target.tagName !== \"A\") {\r\n    return;\r\n  }\r\n  if (target.innerText === \"left\") {\r\n    if (PAGE.current > PAGE.FIRST) {\r\n      debounce(getPrevPage, target);\r\n    }\r\n  } else if (target.innerText === \"right\") {\r\n    if (PAGE.current < PAGE.LAST) {\r\n      debounce(getNextPage, target);\r\n    }\r\n  } else {\r\n    debounce(getPage, target);\r\n  }\r\n  return;\r\n});\r\n\r\nconst DEBOUNCE_INTERVAL = 500;\r\nlet lastTimeout: number;\r\n\r\nconst debounce = (updatePage: Function, target: HTMLElement = null) => {\r\n  if (lastTimeout) {\r\n    window.clearTimeout(lastTimeout);\r\n  }\r\n  lastTimeout = window.setTimeout(function() {\r\n    updatePage(target);\r\n  }, DEBOUNCE_INTERVAL);\r\n};\r\n\r\nconst getPrevPage = () => {\r\n  PAGE.current -= 1;\r\n  getBeers(PAGE.current);\r\n};\r\n\r\nconst getNextPage = () => {\r\n  PAGE.current += 1;\r\n  getBeers(PAGE.current);\r\n};\r\n\r\nconst getPage = (target: HTMLElement) => {\r\n  PAGE.current = +target.innerText;\r\n  getBeers(PAGE.current);\r\n};\r\n\r\nconst cache = [];\r\n\r\n// Favorites\r\nconst main = document.querySelector(\".main\");\r\nmain.addEventListener(\"click\", function favoriteHandler(evt) {\r\n  const favorite = evt.target as HTMLElement;\r\n  if (favorite.tagName !== \"INPUT\") {\r\n    return;\r\n  }\r\n\r\n  const beerName = favorite.parentElement.querySelector(\".beer-card__beer-name\")\r\n    .innerText;\r\n\r\n  if (!favorite.checked) {\r\n    localStorage.removeItem(`favorite_${beerName}`);\r\n  } else {\r\n    localStorage.setItem(`favorite_${beerName}`, \"true\");\r\n  }\r\n});\r\n\r\nlet clicked = false;\r\nconst favoriteBtn = document.querySelector(\".main-header__favorite\");\r\nfavoriteBtn.addEventListener(\"click\", (evt: MouseEvent) => {\r\n  evt.preventDefault();\r\n\r\n  if (!clicked) {\r\n    clicked = true;\r\n    pagination.setAttribute(\"style\", \"visibility: hidden\");\r\n    favoriteBtn.innerText = `back`;\r\n    favoriteBtn.setAttribute(\"style\", \"background-color: green\");\r\n\r\n    const newMain = new DocumentFragment();\r\n\r\n    for (const item of cache) {\r\n      const cacheItemName = item.querySelector(\".beer-card__beer-name\")\r\n        .textContent;\r\n\r\n      if (localStorage.getItem(`favorite_${cacheItemName}`)) {\r\n        newMain.appendChild(item);\r\n      }\r\n    }\r\n\r\n    main.innerHTML = \"\";\r\n    main.appendChild(newMain);\r\n  } else {\r\n    clicked = false;\r\n    pagination.removeAttribute(\"style\");\r\n    favoriteBtn.innerText = `favorite`;\r\n    favoriteBtn.removeAttribute(\"style\");\r\n    getBeers(PAGE.current);\r\n  }\r\n});\r\n\r\n// CreateBeerCard\r\nconst createCard = beer => {\r\n  const card = document.createElement(\"article\");\r\n  card.className = \"beer-card\";\r\n\r\n  const img = document.createElement(\"img\");\r\n  img.className = \"beer-card__image\";\r\n  img.src = beer.img;\r\n  card.appendChild(img);\r\n  const wrapper = document.createElement(\"div\");\r\n  wrapper.className = \"beer-card__wrapper\";\r\n\r\n  const name = document.createElement(\"p\");\r\n  name.className = \"beer-card__name\";\r\n  name.innerText = \"name: \";\r\n\r\n  const beerName = document.createElement(\"span\");\r\n  beerName.className = \"beer-card__beer-name\";\r\n  beerName.innerText = beer.name;\r\n\r\n  name.appendChild(beerName);\r\n  wrapper.appendChild(name);\r\n\r\n  const tagline = document.createElement(\"p\");\r\n  tagline.className = \"beer-card__tagline\";\r\n  tagline.innerText = \"tagline: \" + beer.tagline;\r\n  wrapper.appendChild(tagline);\r\n\r\n  const abv = document.createElement(\"p\");\r\n  abv.className = \"beer-card__abv\";\r\n  abv.innerText = \"abv: \";\r\n\r\n  const beerAbv = document.createElement(\"span\");\r\n  beerAbv.className = \"beer-card__beer-abv\";\r\n  beerAbv.innerText = beer.abv;\r\n\r\n  abv.appendChild(beerAbv);\r\n  wrapper.appendChild(abv);\r\n\r\n  const brewed = document.createElement(\"p\");\r\n  brewed.className = \"beer-card__brewed\";\r\n  brewed.innerText = \"brewed: \" + beer.brewed;\r\n  wrapper.appendChild(brewed);\r\n  card.appendChild(wrapper);\r\n\r\n  const description = document.createElement(\"p\");\r\n  description.className = \"beer-card__description\";\r\n  card.appendChild(description);\r\n  description.innerText = \"description: \" + beer.description;\r\n\r\n  const favorite = document.createElement(\"input\");\r\n  favorite.className = \"beer-card__favorite-checkbox\";\r\n  favorite.type = \"checkbox\";\r\n  favorite.title = \"В избранное\";\r\n  if (localStorage.length > 0) {\r\n    if (localStorage.getItem(`favorite_${beer.name}`)) {\r\n      favorite.checked = true;\r\n    } else {\r\n      favorite.checked = false;\r\n    }\r\n  }\r\n  card.appendChild(favorite);\r\n\r\n  main.appendChild(card);\r\n\r\n  if (cache.length !== 0) {\r\n    for (const item of cache) {\r\n      const cacheItemName = item.querySelector(\".beer-card__beer-name\")\r\n        .textContent;\r\n\r\n      if (cacheItemName === beer.name) {\r\n        return;\r\n      }\r\n    }\r\n  }\r\n  cache.push(card);\r\n};\r\n\r\n// Search\r\nconst searchFlex = document.querySelector(\".search-sort\");\r\n\r\nconst createSearch = (beersNames: string[]) => {\r\n  const mockSearch = searchFlex.querySelector(\".search\");\r\n  mockSearch.removeEventListener(\"submit\", searchHandler);\r\n\r\n  const search = document.createElement(\"form\");\r\n  search.className = \"search\";\r\n\r\n  const input = document.createElement(\"input\");\r\n  input.type = \"search\";\r\n  input.name = \"search-input\";\r\n  input.setAttribute(\"list\", \"beer\");\r\n  input.required = true;\r\n\r\n  const datalist = document.createElement(\"datalist\");\r\n  datalist.id = \"beer\";\r\n\r\n  beersNames.forEach(name => {\r\n    const option = document.createElement(\"option\");\r\n    option.value = name;\r\n    datalist.appendChild(option);\r\n  });\r\n\r\n  const submit = document.createElement(\"button\");\r\n  submit.className = \"button button--red\";\r\n  submit.innerText = \"Search\";\r\n  submit.type = \"submit\";\r\n  submit.setAttribute(\"style\", \"margin-left: 10px\");\r\n\r\n  search.appendChild(input);\r\n  search.appendChild(datalist);\r\n  search.appendChild(submit);\r\n\r\n  main.appendChild(search);\r\n\r\n  search.addEventListener(\"submit\", searchHandler);\r\n  function searchHandler(evt: MouseEvent) {\r\n    evt.preventDefault();\r\n\r\n    const search = evt.target[0] as HTMLElement;\r\n\r\n    if (beersNames.includes(search.value)) {\r\n      const beerCards = main.children;\r\n\r\n      for (const beerCard of beerCards) {\r\n        beerCard.setAttribute(\"style\", \"\");\r\n        const cardName = beerCard.querySelector(`.beer-card__name`);\r\n\r\n        if (cardName.textContent === `name: ${search.value}`) {\r\n          beerCard.setAttribute(\"style\", \"border-color: red; order: -1;\");\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  searchFlex.replaceChild(search, mockSearch);\r\n};\r\n\r\n// Sorting\r\nconst sortPanel = document.querySelector(\".search-sort\");\r\nsortPanel.addEventListener(\"click\", function onSortPanel(evt) {\r\n  const target = evt.target as HTMLElement;\r\n\r\n  if (!target.classList.contains(\"button__sort\")) {\r\n    return;\r\n  }\r\n  evt.preventDefault();\r\n  if (target.classList.contains(\"button__sort\")) {\r\n    const classes = target.className;\r\n\r\n    const regexp = /sort--(.*)/;\r\n    const element = classes.match(regexp)[1];\r\n\r\n    onSort(element);\r\n  }\r\n});\r\n\r\nlet reverse = false;\r\nconst onSort = (element: string) => {\r\n  const beforeSorting = [];\r\n  let afterSorting = [];\r\n\r\n  const beerCards = document.querySelectorAll(\".beer-card\");\r\n  beerCards.forEach(card => {\r\n    const beerName = card.querySelector(`.beer-card__beer-${element}`)\r\n      .textContent;\r\n    beforeSorting.push(beerName);\r\n  });\r\n  if (isNaN(beforeSorting[0])) {\r\n    // @ts-ignore\r\n    afterSorting = beforeSorting.sort((a, b) => (reverse ? a < b : b < a));\r\n  } else {\r\n    afterSorting = beforeSorting.sort((a, b) => (reverse ? a - b : b - a));\r\n  }\r\n  reverse = !reverse;\r\n  beerCards.forEach(card => {\r\n    const name: any = card.querySelector(`.beer-card__beer-${element}`);\r\n    for (const index in afterSorting) {\r\n      const sortName = afterSorting[index];\r\n      if (name.textContent === sortName) {\r\n        card.setAttribute(\"style\", `order: ${index}`);\r\n        break;\r\n      }\r\n    }\r\n  });\r\n};\r\n\r\nconst removeChildren = (elem: any) => {\r\n  elem.innerHTML = \"\";\r\n};\r\n"]}